# 云函数环境变量配置说明

## 为什么需要配置环境变量？

为了安全起见，API Key 不应该硬编码在代码中，而应该使用环境变量。这样即使代码上传到 GitHub 等公开平台，也不会泄露敏感信息。

## 配置步骤

### 1. 打开微信开发者工具
- 点击左侧"云开发"按钮
- 或者点击工具栏"云开发 -> 云开发控制台"

### 2. 进入云函数管理
- 在云开发控制台，点击左侧"云函数"
- 找到 `chat` 云函数，点击进入详情

### 3. 配置环境变量
- 点击"配置"或"版本管理"标签
- 找到"环境变量"设置
- 点击"添加环境变量"

### 4. 添加 API Key
- **变量名**: `DEEPSEEK_API_KEY`
- **变量值**: `sk-c0e0579bf1d946a5a95384e0b7ea5124`

### 5. 保存并重新上传云函数
- 点击"保存"
- 在微信开发者工具中，右键点击 `chat` 云函数
- 选择"上传并部署：云端安装依赖"

## 验证配置

上传后，可以在云函数日志中查看是否配置成功：
- 如果配置正确，不会看到 "⚠️ 未配置 DEEPSEEK_API_KEY 环境变量！" 的错误
- 如果看到该错误，说明环境变量未生效，需要重新检查配置

## 安全提示

✅ **正确做法**：
- API Key 存储在云函数环境变量中
- 代码中使用 `process.env.DEEPSEEK_API_KEY` 读取
- 代码可以安全上传到 GitHub

❌ **错误做法**：
- API Key 直接写在代码里
- 代码上传后 API Key 泄露
- 可能被他人滥用，产生费用
